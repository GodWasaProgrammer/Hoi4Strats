@implements IDisposable

@inject NavigationManager NavigationManager
@using Hoi4Strats.Client
@inherits LayoutComponentBase
@layout MainLayout

<RadzenSidebar>
    <RadzenPanelMenu>
        <RadzenPanelMenuItem Path="/" Text="Home" Icon="home" />
        <RadzenPanelMenuItem Path="/Land" Text="Land">
            <RadzenPanelMenuItem Text="Template Design" />
            <RadzenPanelMenuItem Text="Offence" />
            <RadzenPanelMenuItem Text="Defence" />
            <RadzenPanelMenuItem Text="Battle Planning" />
            <RadzenPanelMenuItem Text="Micro" />
        </RadzenPanelMenuItem>
        <RadzenPanelMenuItem Path="/Sea" Text="Sea">
            <RadzenPanelMenuItem Text="Design Guide" />
            <RadzenPanelMenuItem Text="Naval Superiority" />
            <RadzenPanelMenuItem Text="General" />
        </RadzenPanelMenuItem>
        <RadzenPanelMenuItem Path="Air" Text="Air">
            <RadzenPanelMenuItem Text="Design Guide">
                <RadzenPanelMenuItem Text="Fighter" />
                <RadzenPanelMenuItem Text="Close Air Support" />
                <RadzenPanelMenuItem Text="Strategic Bomber" />
                <RadzenPanelMenuItem Text="Naval Bomber" />
                <RadzenPanelMenuItem Text="Carrier Naval Bomber" />
            </RadzenPanelMenuItem>

            <RadzenPanelMenuItem Text="Air Superiority" />
            <RadzenPanelMenuItem Text="General" />
        </RadzenPanelMenuItem>
        <RadzenPanelMenuItem Path="Country" Text="Country">
            <RadzenPanelMenuItem Text="Majors">
                <RadzenPanelMenuItem Text="Germany" />
                <RadzenPanelMenuItem Text="Italy" />
                <RadzenPanelMenuItem Text="Japan" />
                <RadzenPanelMenuItem Text="Soviet Union" />
                <RadzenPanelMenuItem Text="France" />
                <RadzenPanelMenuItem Text="United Kingdom" />
                <RadzenPanelMenuItem Text="United States" />
            </RadzenPanelMenuItem>
            <RadzenPanelMenuItem Text="Minors">
                <RadzenPanelMenuItem Text="Afghanistan" />
                <RadzenPanelMenuItem Text="Albania" />
                <RadzenPanelMenuItem Text="Algeria" />
                <RadzenPanelMenuItem Text="Andorra" />
                <RadzenPanelMenuItem Text="Angola" />
                <RadzenPanelMenuItem Text="Antigua and Barbuda" />
                <RadzenPanelMenuItem Text="Argentina" />
                <RadzenPanelMenuItem Text="Armenia" />
                <RadzenPanelMenuItem Text="Azerbaijan" />
                <RadzenPanelMenuItem Text="Bahamas" />
                <RadzenPanelMenuItem Text="Bahrain" />
                <RadzenPanelMenuItem Text="Bangladesh" />
                <RadzenPanelMenuItem Text="Barbados" />
                <RadzenPanelMenuItem Text="Belgium" />
                <RadzenPanelMenuItem Text="Belize" />
                <RadzenPanelMenuItem Text="Benin" />
                <RadzenPanelMenuItem Text="Bhutan" />
                <RadzenPanelMenuItem Text="Bolivia" />
                <RadzenPanelMenuItem Text="Bosnia and Herzegovina" />
                <RadzenPanelMenuItem Text="Botswana" />
                <RadzenPanelMenuItem Text="Brazil" />
                <RadzenPanelMenuItem Text="Brunei" />
                <RadzenPanelMenuItem Text="Bulgaria" />
                <RadzenPanelMenuItem Text="Burkina Faso" />
                <RadzenPanelMenuItem Text="Burundi" />
                <RadzenPanelMenuItem Text="Chile" />
                <RadzenPanelMenuItem Text="Colombia" />
                <RadzenPanelMenuItem Text="Costa Rica" />
                <RadzenPanelMenuItem Text="Cyprus" />
                <RadzenPanelMenuItem Text="Denmark" />
                <RadzenPanelMenuItem Text="Djibouti" />
                <RadzenPanelMenuItem Text="Dominican Republic" />
                <RadzenPanelMenuItem Text="Ecuador" />
                <RadzenPanelMenuItem Text="Egypt" />
                <RadzenPanelMenuItem Text="El Salvador" />
                <RadzenPanelMenuItem Text="Equatorial Guinea" />
                <RadzenPanelMenuItem Text="Estonia" />
                <RadzenPanelMenuItem Text="Eswatini" />
                <RadzenPanelMenuItem Text="Fiji" />
                <RadzenPanelMenuItem Text="Philippines" />
                <RadzenPanelMenuItem Text="Finland" />
                <RadzenPanelMenuItem Text="France" />
                <RadzenPanelMenuItem Text="Gabon" />
                <RadzenPanelMenuItem Text="Gambia" />
                <RadzenPanelMenuItem Text="Georgia" />
                <RadzenPanelMenuItem Text="Ghana" />
                <RadzenPanelMenuItem Text="Grenada" />
                <RadzenPanelMenuItem Text="Greece" />
                <RadzenPanelMenuItem Text="Greenland" />
                <RadzenPanelMenuItem Text="Guatemala" />
                <RadzenPanelMenuItem Text="Guinea" />
                <RadzenPanelMenuItem Text="Guinea-Bissau" />
                <RadzenPanelMenuItem Text="Guyana" />
                <RadzenPanelMenuItem Text="Honduras" />
                <RadzenPanelMenuItem Text="Hong Kong" />
                <RadzenPanelMenuItem Text="India" />
                <RadzenPanelMenuItem Text="Indonesia" />
                <RadzenPanelMenuItem Text="Iraq" />
                <RadzenPanelMenuItem Text="Iran" />
                <RadzenPanelMenuItem Text="Ireland" />
                <RadzenPanelMenuItem Text="Iceland" />
                <RadzenPanelMenuItem Text="Italy" />
                <RadzenPanelMenuItem Text="Jamaica" />
                <RadzenPanelMenuItem Text="Jordan" />
                <RadzenPanelMenuItem Text="Cambodia" />
                <RadzenPanelMenuItem Text="Cameroon" />
                <RadzenPanelMenuItem Text="Canada" />
                <RadzenPanelMenuItem Text="Cape Verde" />
                <RadzenPanelMenuItem Text="Kazakhstan" />
                <RadzenPanelMenuItem Text="Kenya" />
                <RadzenPanelMenuItem Text="China" />
                <RadzenPanelMenuItem Text="Kyrgyzstan" />
                <RadzenPanelMenuItem Text="Kuwait" />
                <RadzenPanelMenuItem Text="Laos" />
                <RadzenPanelMenuItem Text="Latvia" />
                <RadzenPanelMenuItem Text="Lebanon" />
                <RadzenPanelMenuItem Text="Liberia" />
                <RadzenPanelMenuItem Text="Libya" />
                <RadzenPanelMenuItem Text="Lithuania" />
                <RadzenPanelMenuItem Text="Luxembourg" />
                <RadzenPanelMenuItem Text="Malawi" />
                <RadzenPanelMenuItem Text="Malaysia" />
                <RadzenPanelMenuItem Text="Maldives" />
                <RadzenPanelMenuItem Text="Mali" />
                <RadzenPanelMenuItem Text="Malta" />
                <RadzenPanelMenuItem Text="Morocco" />
                <RadzenPanelMenuItem Text="Mauritius" />
                <RadzenPanelMenuItem Text="Mexico" />
                <RadzenPanelMenuItem Text="Micronesia" />
                <RadzenPanelMenuItem Text="Moldova" />
                <RadzenPanelMenuItem Text="Monaco" />
                <RadzenPanelMenuItem Text="Mozambique" />
                <RadzenPanelMenuItem Text="Niger" />
                <RadzenPanelMenuItem Text="Nigeria" />
                <RadzenPanelMenuItem Text="Norway" />
                <RadzenPanelMenuItem Text="New Zealand" />
                <RadzenPanelMenuItem Text="Nicaragua" />
                <RadzenPanelMenuItem Text="Panama" />
                <RadzenPanelMenuItem Text="Papua New Guinea" />
                <RadzenPanelMenuItem Text="Paraguay" />
                <RadzenPanelMenuItem Text="Peru" />
                <RadzenPanelMenuItem Text="Poland" />
                <RadzenPanelMenuItem Text="Portugal" />
                <RadzenPanelMenuItem Text="Qatar" />
                <RadzenPanelMenuItem Text="Romania" />
                <RadzenPanelMenuItem Text="Russia" />
                <RadzenPanelMenuItem Text="South Africa" />
                <RadzenPanelMenuItem Text="South Korea" />
                <RadzenPanelMenuItem Text="South Sudan" />
                <RadzenPanelMenuItem Text="Sweden" />
                <RadzenPanelMenuItem Text="Syria" />
                <RadzenPanelMenuItem Text="Tajikistan" />
                <RadzenPanelMenuItem Text="Tanzania" />
                <RadzenPanelMenuItem Text="Thailand" />
                <RadzenPanelMenuItem Text="Czech Republic" />
                <RadzenPanelMenuItem Text="Tunisia" />
                <RadzenPanelMenuItem Text="Turkey" />
                <RadzenPanelMenuItem Text="Turkmenistan" />

            </RadzenPanelMenuItem>
        </RadzenPanelMenuItem>
    </RadzenPanelMenu>
    <RadzenPanelMenu>
        <RadzenPanelMenuItem Path="/Account/Login" Text="Login" />
        <AuthorizeView>
            <RadzenPanelMenuItem Path="/CreateGuide" Text="Create Guide" />
            <RadzenPanelMenuItem Path="/Inspector" Text="Review submissions" />
        </AuthorizeView>
        <RadzenPanelMenu></RadzenPanelMenu>
    </RadzenPanelMenu>
    <Hoi4Strats.Client.Pages.ExtNewsFeed></Hoi4Strats.Client.Pages.ExtNewsFeed>
</RadzenSidebar>

@code {
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}

